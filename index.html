<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inecta Discovery Assistant</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@700&family=Verdana&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Official Inecta Brand Colors */
      --inecta-green: #124030;
      --inecta-teal: #00CCCC;
      --inecta-yellow: #FFD44D;
      --inecta-tan: #DECF9E;
      --dark-grey: #575763;
      --light-grey: #999999;
      
      /* UI Theme Colors */
      --background-light: #F8F8F8;
      --border-color: #EAEAEA;
      --body-text-color: #293036;
      --bot-bubble-bg: #FFFFFF;
      --user-bubble-bg: var(--inecta-green);

      /* Typography from Brand Guide */
      --font-heading: 'Open Sans', sans-serif;
      --font-body: 'Verdana', sans-serif;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: var(--font-body);
      background: var(--background-light);
      color: var(--body-text-color);
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    
    .container {
      width: 100%;
      max-width: 800px;
      height: 90vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
      border-radius: 16px;
      overflow: hidden;
      background: #FFFFFF;
    }
    
    .header {
      padding: 15px 20px;
      background: #FFFFFF;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      font-family: var(--font-heading);
      font-weight: 700;
      font-size: 20px;
      color: var(--inecta-green);
      letter-spacing: 2px;
    }
    
    #newChatBtn {
      padding: 6px 12px;
      font-size: 12px;
      font-family: var(--font-heading);
      font-weight: 700;
      background-color: var(--light-grey);
      color: white;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    
    #newChatBtn:hover {
      background-color: var(--dark-grey);
    }
    
    .topic-tracker { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 8px; 
      padding: 15px 20px;
      justify-content: center;
      border-bottom: 1px solid var(--border-color);
      background: #FFFFFF;
    }
    
    .topic-item { 
      padding: 6px 12px; 
      border-radius: 15px; 
      font-size: 12px; 
      font-family: var(--font-heading);
      font-weight: 700;
      transition: all 0.3s ease; 
      cursor: pointer;
    }
    
    .status-not-started { 
      background-color: #E0E0E0; 
      color: #616161; 
    }
    
    .status-in-progress { 
      background-color: var(--inecta-tan); 
      color: var(--inecta-green); 
      animation: pulse-tan 2s infinite; 
    }
    
    .status-completed { 
      background-color: var(--inecta-green); 
      color: #FFFFFF; 
    }
    
    @keyframes pulse-tan {
      0% { box-shadow: 0 0 0 0 rgba(222, 207, 158, 0.7); }
      70% { box-shadow: 0 0 0 8px rgba(222, 207, 158, 0); }
      100% { box-shadow: 0 0 0 0 rgba(222, 207, 158, 0); }
    }
    
    .chat {
      padding: 30px;
      flex-grow: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
      background-color: var(--background-light);
    }
    
    .chat::-webkit-scrollbar { 
      width: 8px; 
    }
    
    .chat::-webkit-scrollbar-track { 
      background: var(--background-light); 
      border-radius: 4px; 
    }
    
    .chat::-webkit-scrollbar-thumb { 
      background-color: #d4d4d4; 
      border-radius: 4px; 
    }
    
    .chat::-webkit-scrollbar-thumb:hover { 
      background-color: var(--dark-grey); 
    }
    
    .msg {
      padding: 12px 18px;
      border-radius: 20px;
      line-height: 1.6;
      max-width: 80%;
      white-space: pre-wrap;
      word-wrap: break-word;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .user {
      background-color: var(--user-bubble-bg);
      color: #FFFFFF;
      border-bottom-right-radius: 5px;
      align-self: flex-end;
    }
    
    .bot {
      background-color: var(--bot-bubble-bg);
      color: var(--body-text-color);
      border: 1px solid var(--border-color);
      border-bottom-left-radius: 5px;
      align-self: flex-start;
    }
    
    .typing-indicator {
      display: none;
      align-items: center;
      padding: 12px 18px;
      background-color: var(--bot-bubble-bg);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      border-bottom-left-radius: 5px;
      align-self: flex-start;
      max-width: 80px;
    }
    
    .typing-indicator.active {
      display: flex;
    }
    
    .typing-indicator span {
      height: 8px; 
      width: 8px; 
      background-color: #BDBDBD;
      border-radius: 50%; 
      display: inline-block; 
      margin: 0 2px;
      animation: bounce 1.4s infinite ease-in-out both;
    }
    
    .typing-indicator span:nth-of-type(2) { 
      animation-delay: -0.2s; 
    }
    
    .typing-indicator span:nth-of-type(3) { 
      animation-delay: -0.4s; 
    }
    
    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0); }
      40% { transform: scale(1.0); }
    }
    
    .input-container {
      padding: 20px;
      border-top: 1px solid var(--border-color);
      background: #FFFFFF;
    }
    
    #attachmentDisplay {
      font-size: 12px;
      font-style: italic;
      margin-bottom: 8px;
      color: var(--dark-grey);
      display: none;
    }
    
    #attachmentDisplay.active {
      display: block;
    }
    
    .input-area {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    #messageInput {
      flex-grow: 1;
      padding: 12px 18px;
      border-radius: 22px;
      border: 1px solid var(--border-color);
      background: var(--background-light);
      color: var(--body-text-color);
      font-size: 16px;
      font-family: var(--font-body);
      transition: all 0.2s ease;
    }
    
    #messageInput:focus {
      outline: none;
      border-color: var(--inecta-teal);
      box-shadow: 0 0 0 2px rgba(0, 204, 204, 0.2);
    }
    
    .action-button {
      background-color: var(--inecta-teal);
      color: #000000;
      border: none;
      cursor: pointer;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }
    
    .action-button:disabled {
      background-color: #BDBDBD;
      cursor: not-allowed;
    }
    
    .action-button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    #reportButton, #scheduleButton {
      padding: 10px 20px;
      border-radius: 20px;
      border: none;
      cursor: pointer;
      font-family: var(--font-heading);
      font-weight: 700;
      text-transform: uppercase;
      transition: all 0.2s ease;
      font-size: 14px;
      white-space: nowrap;
      background-color: var(--inecta-green);
      color: #FFFFFF;
      display: none;
      margin-top: 10px;
    }
    
    #reportButton.active, #scheduleButton.active {
      display: inline-block;
    }
    
    #reportButton:hover, #scheduleButton:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .action-buttons-container {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      justify-content: center;
    }
    
    #fileInput {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">INECTA</div>
      <button id="newChatBtn">NEW CHAT</button>
    </div>
    
    <div class="topic-tracker">
      <div class="topic-item status-completed">Company Overview</div>
      <div class="topic-item status-completed">Business Model</div>
      <div class="topic-item status-in-progress">Key Personnel</div>
      <div class="topic-item status-not-started">Financials</div>
      <div class="topic-item status-not-started">Competition</div>
      <div class="topic-item status-not-started">Risks</div>
    </div>
    
    <div class="chat" id="chatContainer">
      <div class="msg bot">Welcome to Inecta Discovery Assistant! I'm here to help you explore business opportunities and gather intelligence. What would you like to know about today?</div>
    </div>
    
    <div class="typing-indicator" id="typingIndicator">
      <span></span>
      <span></span>
      <span></span>
    </div>
    
    <div class="input-container">
      <div id="attachmentDisplay"></div>
      <div class="input-area">
        <input type="text" id="messageInput" placeholder="Type your message..." />
        <button class="action-button" id="uploadButton" title="Upload file">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"/>
          </svg>
        </button>
        <button class="action-button" id="sendButton" title="Send message">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
          </svg>
        </button>
      </div>
      <div class="action-buttons-container">
        <button id="reportButton">Generate Report</button>
        <button id="scheduleButton">Schedule Meeting</button>
      </div>
      <input type="file" id="fileInput" accept=".pdf,.doc,.docx,.xls,.xlsx,.csv" />
    </div>
  </div>

  <script>
    // State management
    let conversationHistory = [];
    let currentTopics = {
      'Company Overview': 'completed',
      'Business Model': 'completed',
      'Key Personnel': 'in-progress',
      'Financials': 'not-started',
      'Competition': 'not-started',
      'Risks': 'not-started'
    };
    let attachedFile = null;

    // DOM elements
    const chatContainer = document.getElementById('chatContainer');
    const messageInput = document.getElementById('messageInput');
    const sendButton = document.getElementById('sendButton');
    const uploadButton = document.getElementById('uploadButton');
    const fileInput = document.getElementById('fileInput');
    const attachmentDisplay = document.getElementById('attachmentDisplay');
    const typingIndicator = document.getElementById('typingIndicator');
    const newChatBtn = document.getElementById('newChatBtn');
    const reportButton = document.getElementById('reportButton');
    const scheduleButton = document.getElementById('scheduleButton');

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      messageInput.focus();
      updateTopicDisplay();
    });

    // Event listeners
    sendButton.addEventListener('click', sendMessage);
    messageInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });

    uploadButton.addEventListener('click', () => fileInput.click());
    fileInput.addEventListener('change', handleFileUpload);
    newChatBtn.addEventListener('click', startNewChat);
    reportButton.addEventListener('click', generateReport);
    scheduleButton.addEventListener('click', scheduleMeeting);

    // Topic items click handler
    document.querySelectorAll('.topic-item').forEach(item => {
      item.addEventListener('click', function() {
        const topicName = this.textContent;
        messageInput.value = `Tell me about the ${topicName}`;
        sendMessage();
      });
    });

    function sendMessage() {
      const message = messageInput.value.trim();
      if (!message) return;

      // Add user message
      addMessage(message, 'user');
      conversationHistory.push({ role: 'user', content: message });
      
      // Clear input and attachment
      messageInput.value = '';
      if (attachedFile) {
        attachedFile = null;
        attachmentDisplay.classList.remove('active');
        attachmentDisplay.textContent = '';
      }

      // Show typing indicator
      showTyping();

      // Simulate bot response
      setTimeout(() => {
        const response = generateBotResponse(message);
        hideTyping();
        addMessage(response, 'bot');
        conversationHistory.push({ role: 'bot', content: response });
        
        // Update topics based on conversation
        updateTopicsBasedOnConversation(message);
        
        // Show action buttons after certain topics
        checkForActionButtons();
      }, 1500);
    }

    function addMessage(content, sender) {
      const msgDiv = document.createElement('div');
      msgDiv.className = `msg ${sender}`;
      msgDiv.textContent = content;
      chatContainer.appendChild(msgDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function showTyping() {
      typingIndicator.classList.add('active');
      chatContainer.appendChild(typingIndicator);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function hideTyping() {
      typingIndicator.classList.remove('active');
    }

    function handleFileUpload(e) {
      const file = e.target.files[0];
      if (file) {
        attachedFile = file;
        attachmentDisplay.textContent = `📎 Attached: ${file.name}`;
        attachmentDisplay.classList.add('active');
      }
    }

    function generateBotResponse(message) {
      const lowerMessage = message.toLowerCase();
      
      if (lowerMessage.includes('company overview')) {
        return "The target company is a technology firm specializing in cloud infrastructure solutions. Founded in 2015, they've grown to serve over 500 enterprise clients across North America. Their primary focus is on providing scalable, secure cloud migration and management services.";
      } else if (lowerMessage.includes('business model')) {
        return "The company operates on a SaaS subscription model with three tiers: Basic, Professional, and Enterprise. Revenue streams include monthly subscriptions (70%), professional services (20%), and training/certification programs (10%). Average contract value is $125,000 annually.";
      } else if (lowerMessage.includes('key personnel')) {
        return "CEO: Sarah Johnson (ex-AWS, 15 years experience)\nCTO: Michael Chen (ex-Google, 12 years experience)\nCFO: Robert Williams (ex-Deloitte, 18 years experience)\n\nThe leadership team has strong industry credentials and a proven track record in scaling technology companies.";
      } else if (lowerMessage.includes('financial')) {
        return "Based on available data:\n• Annual Revenue: $45M (2023)\n• Growth Rate: 35% YoY\n• EBITDA Margin: 22%\n• Customer Retention: 94%\n• Burn Rate: Currently cash flow positive\n\nWould you like me to dive deeper into any specific financial metrics?";
      } else if (lowerMessage.includes('competition')) {
        return "Main competitors include:\n1. CloudForce (Market leader, $2B valuation)\n2. NexGen Cloud ($500M valuation)\n3. Several regional players\n\nThe company differentiates through superior customer service and specialized vertical solutions for healthcare and finance sectors.";
      } else if (lowerMessage.includes('risk')) {
        return "Key risks identified:\n• Dependency on AWS infrastructure (60% of operations)\n• Customer concentration (top 10 clients = 40% revenue)\n• Talent retention in competitive market\n• Regulatory compliance in healthcare vertical\n• Technology disruption from AI-native competitors";
      } else {
        return "I can help you explore various aspects of this opportunity. Try asking about specific topics like financials, competition, key personnel, or risks. You can also click on any topic above to learn more.";
      }
    }

    function updateTopicsBasedOnConversation(message) {
      const lowerMessage = message.toLowerCase();
      
      Object.keys(currentTopics).forEach(topic => {
        if (lowerMessage.includes(topic.toLowerCase())) {
          // Mark topic as completed
          currentTopics[topic] = 'completed';
          
          // Mark next topic as in-progress
          const topics = Object.keys(currentTopics);
          const currentIndex = topics.indexOf(topic);
          if (currentIndex < topics.length - 1) {
            const nextTopic = topics[currentIndex + 1];
            if (currentTopics[nextTopic] === 'not-started') {
              currentTopics[nextTopic] = 'in-progress';
            }
          }
        }
      });
      
      updateTopicDisplay();
    }

    function updateTopicDisplay() {
      document.querySelectorAll('.topic-item').forEach(item => {
        const topicName = item.textContent;
        const status = currentTopics[topicName];
        
        // Remove all status classes
        item.classList.remove('status-not-started', 'status-in-progress', 'status-completed');
        
        // Add appropriate status class
        item.classList.add(`status-${status.replace(' ', '-')}`);
      });
    }

    function checkForActionButtons() {
      const completedCount = Object.values(currentTopics).filter(status => status === 'completed').length;
      
      if (completedCount >= 4) {
        reportButton.classList.add('active');
      }
      
      if (completedCount >= 5) {
        scheduleButton.classList.add('active');
      }
    }

    function startNewChat() {
      // Clear chat
      chatContainer.innerHTML = '<div class="msg bot">Welcome to Inecta Discovery Assistant! I\'m here to help you explore business opportunities and gather intelligence. What would you like to know about today?</div>';
      
      // Reset topics
      currentTopics = {
        'Company Overview': 'not-started',
        'Business Model': 'not-started',
        'Key Personnel': 'not-started',
        'Financials': 'not-started',
        'Competition': 'not-started',
        'Risks': 'not-started'
      };
      
      // Reset conversation history
      conversationHistory = [];
      
      // Hide action buttons
      reportButton.classList.remove('active');
      scheduleButton.classList.remove('active');
      
      // Update display
      updateTopicDisplay();
      messageInput.focus();
    }

    function generateReport() {
      addMessage("Generating comprehensive discovery report...", 'bot');
      setTimeout(() => {
        addMessage("Report generated! The discovery report has been compiled with all gathered information about the target company. It includes executive summary, detailed analysis of all topics discussed, and recommended next steps. The report has been saved to your dashboard.", 'bot');
      }, 2000);
    }

    function scheduleMeeting() {
      addMessage("Opening calendar to schedule follow-up meeting...", 'bot');
      setTimeout(() => {
        addMessage("Meeting scheduler opened! Please select your preferred time slots for the discovery review meeting. An invitation will be sent to all stakeholders once confirmed.", 'bot');
      }, 1500);
    }
  </script>
</body>
</html>
